<!DOCTYPE html>

<html lang="ja">

<head>

Â  <meta charset="UTF-8" />

Â  <meta name="viewport" content="width=device-width,initial-scale=1.0" />

Â  <title>BLAST TRAINER - English Learning Fun!</title>

Â  <link href="https://fonts.googleapis.com/css2?family=Nunito:wght@400;600;700;800&display=swap" rel="stylesheet">

Â  <style>

Â  Â  :root {

Â  Â  Â  --bg-gradient-start: #f0f4f8; /* Light Grayish Blue */

Â  Â  Â  --bg-gradient-end: #e6e9f0; /* Lighter Grayish Blue */

Â  Â  Â  --primary-color: #6A82FB; /* Soft Blue */

Â  Â  Â  --secondary-color: #FCB69F; /* Soft Orange/Peach */

Â  Â  Â  --accent-color: #84E1BC; /* Mint Green */

Â  Â  Â  --text-color: #3D4758; /* Dark Slate Gray */

Â  Â  Â  --text-light-color: #ffffff;

Â  Â  Â  --correct-color: #5CB85C; /* Success Green */

Â  Â  Â  --incorrect-color: #D9534F; /* Danger Red */

Â  Â  Â  --disabled-color: #B0BEC5; /* Light Gray */

Â  Â  Â  --card-bg: #ffffff;

Â  Â  Â  --shadow-color: rgba(0, 0, 0, 0.1);

Â  Â  Â  --font-family: 'Nunito', sans-serif;

Â  Â  }



Â  Â  * {

Â  Â  Â  margin: 0;

Â  Â  Â  padding: 0;

Â  Â  Â  box-sizing: border-box;

Â  Â  }



Â  Â  body {

Â  Â  Â  font-family: var(--font-family);

Â  Â  Â  background: linear-gradient(135deg, var(--bg-gradient-start), var(--bg-gradient-end));

Â  Â  Â  color: var(--text-color);

Â  Â  Â  min-height: 100vh;

Â  Â  Â  display: flex;

Â  Â  Â  flex-direction: column;

Â  Â  Â  align-items: center;

Â  Â  Â  justify-content: center;

Â  Â  Â  padding: 15px 5px; /* Reduced horizontal padding for body */

Â  Â  Â  overflow-x: hidden;

Â  Â  }



Â  Â  .container {

Â  Â  Â  max-width: 700px;

Â  Â  Â  width: 100%;

Â  Â  Â  text-align: center;

Â  Â  Â  padding: 10px; /* Reduced container padding */

Â  Â  }



Â  Â  h1 {

Â  Â  Â  font-size: 2.5em; /* Slightly reduced for mobile */

Â  Â  Â  color: var(--primary-color);

Â  Â  Â  margin-bottom: 25px; /* Reduced margin */

Â  Â  Â  font-weight: 800;

Â  Â  Â  letter-spacing: 1px;

Â  Â  Â  cursor: pointer;

Â  Â  Â  transition: color 0.3s ease;

Â  Â  }

Â  Â  h1:hover {

Â  Â  Â  color: var(--secondary-color);

Â  Â  }



Â  Â  /* h2 elements are removed from HTML for setup screen */



Â  Â  .setup-screen, .game-screen, .result-screen {

Â  Â  Â  background-color: var(--card-bg);

Â  Â  Â  padding: 20px; /* Uniform padding */

Â  Â  Â  border-radius: 20px;

Â  Â  Â  box-shadow: 0 8px 25px var(--shadow-color); /* Adjusted shadow */

Â  Â  Â  width: 100%;

Â  Â  Â  animation: fadeIn 0.5s ease-out;

Â  Â  Â  margin-bottom: 20px; /* Added margin between screens if they were to stack (though they don't) */

Â  Â  }



Â  Â  @keyframes fadeIn {

Â  Â  Â  from { opacity: 0; transform: translateY(15px); }

Â  Â  Â  to { opacity: 1; transform: translateY(0); }

Â  Â  }



Â  Â  .setup-screen { display: block; }

Â  Â  .game-screen, .result-screen { display: none; }



Â  Â  .selection {

Â  Â  Â  margin-bottom: 25px; /* Adjusted margin */

Â  Â  }

Â  Â  .selection:last-of-type {

Â  Â  Â  Â  margin-bottom: 20px; /* Less margin for the last selection group before start button */

Â  Â  }





Â  Â  .buttons {

Â  Â  Â  display: flex;

Â  Â  Â  flex-wrap: wrap;

Â  Â  Â  gap: 10px; /* Reduced gap */

Â  Â  Â  justify-content: center;

Â  Â  Â  /* margin-bottom: 15px; Removed, spacing handled by .selection */

Â  Â  }



Â  Â  .btn {

Â  Â  Â  border: none;

Â  Â  Â  cursor: pointer;

Â  Â  Â  font-weight: 600;

Â  Â  Â  transition: all 0.2s ease-out;

Â  Â  Â  color: var(--text-color);

Â  Â  Â  padding: 10px 18px; /* Adjusted padding */

Â  Â  Â  border-radius: 20px;Â 

Â  Â  Â  background-color: #f0f0f0;

Â  Â  Â  font-size: 0.95em; /* Adjusted font size */

Â  Â  Â  box-shadow: 0 2px 4px rgba(0,0,0,0.05);

Â  Â  }

Â  Â  .btn:hover {

Â  Â  Â  transform: translateY(-2px) scale(1.02);

Â  Â  Â  box-shadow: 0 3px 8px rgba(0,0,0,0.1);

Â  Â  }

Â  Â  .btn.selected {

Â  Â  Â  background-color: var(--primary-color);

Â  Â  Â  color: var(--text-light-color);

Â  Â  Â  box-shadow: 0 3px 10px rgba(var(--primary-color-rgb, 106, 130, 251), 0.35);

Â  Â  Â  transform: scale(1.03);

Â  Â  }

Â  Â  :root { --primary-color-rgb: 106, 130, 251; }





Â  Â  .start-btn, .restart-btn {

Â  Â  Â  padding: 14px 30px; /* Adjusted padding */

Â  Â  Â  font-size: 1.1em; /* Adjusted font size */

Â  Â  Â  border-radius: 25px;

Â  Â  Â  color: var(--text-light-color);

Â  Â  Â  font-weight: 700;

Â  Â  Â  box-shadow: 0 4px 12px var(--shadow-color);

Â  Â  }



Â  Â  .start-btn {

Â  Â  Â  background-color: var(--accent-color);

Â  Â  Â  display: block; /* Make it block to control margin auto */

Â  Â  Â  margin: 0 auto; /* Center the button */

Â  Â  }

Â  Â  .start-btn:hover {

Â  Â  Â  background-color: #68c9a9;Â 

Â  Â  Â  transform: translateY(-3px) scale(1.03);

Â  Â  Â  box-shadow: 0 5px 18px rgba(132, 225, 188, 0.45);

Â  Â  }

Â  Â  .start-btn:disabled {

Â  Â  Â  background-color: var(--disabled-color);

Â  Â  Â  cursor: not-allowed;

Â  Â  Â  transform: none;

Â  Â  Â  box-shadow: none;

Â  Â  Â  color: #777;

Â  Â  }



Â  Â  .restart-btn {

Â  Â  Â  background-color: var(--secondary-color);

Â  Â  }

Â  Â  .restart-btn:hover {

Â  Â  Â  background-color: #fa9f85;

Â  Â  Â  Â  transform: translateY(-3px) scale(1.03);

Â  Â  Â  box-shadow: 0 5px 18px rgba(252, 182, 159, 0.45);

Â  Â  }

Â  Â 

Â  Â  .progress-bar {

Â  Â  Â  width: 100%;

Â  Â  Â  height: 10px; /* Slimmer bar */

Â  Â  Â  background-color: #e0e0e0;

Â  Â  Â  border-radius: 5px;

Â  Â  Â  margin-bottom: 20px; /* Adjusted margin */

Â  Â  Â  overflow: hidden;

Â  Â  Â  box-shadow: inset 0 1px 2px rgba(0,0,0,0.08);

Â  Â  }

Â  Â  .progress-fill {

Â  Â  Â  height: 100%;

Â  Â  Â  background: linear-gradient(90deg, var(--accent-color), var(--primary-color));

Â  Â  Â  width: 0%;

Â  Â  Â  transition: width 0.3s ease-in-out;

Â  Â  Â  border-radius: 5px;

Â  Â  }



Â  Â  .game-info {

Â  Â  Â  display: flex;

Â  Â  Â  justify-content: space-between;

Â  Â  Â  align-items: center;

Â  Â  Â  margin-bottom: 20px; /* Adjusted margin */

Â  Â  Â  font-size: 1em; /* Adjusted font size */

Â  Â  Â  font-weight: 600;

Â  Â  }

Â  Â  .timer { color: var(--primary-color); }

Â  Â  .score { color: var(--secondary-color); }



Â  Â  .word-display {

Â  Â  Â  background-color: #f8f9fa;

Â  Â  Â  border-radius: 15px;

Â  Â  Â  padding: 20px; /* Reduced padding */

Â  Â  Â  margin-bottom: 20px; /* Adjusted margin */

Â  Â  Â  border: 1px solid #eee;

Â  Â  Â  min-height: 100px; /* Reduced min-height */

Â  Â  Â  display: flex;

Â  Â  Â  flex-direction: column;

Â  Â  Â  justify-content: center; /* Content will be centered */

Â  Â  Â  align-items: center;

Â  Â  Â  position: relative; /* For positioning answer-display if needed */

Â  Â  }

Â  Â  .word {

Â  Â  Â  font-size: 2.2em; /* Adjusted font size */

Â  Â  Â  font-weight: 700;

Â  Â  Â  color: var(--text-color);

Â  Â  Â  margin-bottom: 10px; /* Reduced margin */

Â  Â  }



Â  Â  .choices {

Â  Â  Â  display: grid;

Â  Â  Â  grid-template-columns: repeat(2, 1fr);

Â  Â  Â  gap: 12px; /* Adjusted gap */

Â  Â  Â  margin-bottom: 20px; /* Adjusted margin */

Â  Â  }

Â  Â  .choice-btn {

Â  Â  Â  padding: 15px; /* Adjusted padding */

Â  Â  Â  font-size: 1em; /* Adjusted font size */

Â  Â  Â  border: 1px solid #ddd;

Â  Â  Â  background-color: var(--card-bg);

Â  Â  Â  color: var(--text-color);

Â  Â  Â  font-weight: 600;

Â  Â  Â  border-radius: 10px;Â 

Â  Â  }

Â  Â  .choice-btn:hover:not(:disabled) {

Â  Â  Â  border-color: var(--primary-color);

Â  Â  Â  color: var(--primary-color);

Â  Â  Â  transform: translateY(-2px);

Â  Â  }

Â  Â  .choice-btn.correct {

Â  Â  Â  background-color: var(--correct-color);

Â  Â  Â  border-color: var(--correct-color);

Â  Â  Â  color: var(--text-light-color);

Â  Â  Â  animation: pulse 0.5s;

Â  Â  }

Â  Â  .choice-btn.incorrect { /* This class is not used in current logic, marked-incorrect is used */

Â  Â  Â  background-color: var(--incorrect-color);

Â  Â  Â  border-color: var(--incorrect-color);

Â  Â  Â  color: var(--text-light-color);

Â  Â  }

Â  Â  Â  .choice-btn.marked-incorrect { /* Used for incorrect attempts, allows re-clicking */

Â  Â  Â  Â  background-color: var(--incorrect-color);

Â  Â  Â  Â  border-color: var(--incorrect-color);

Â  Â  Â  Â  color: var(--text-light-color);

Â  Â  Â  Â  /* No shake animation by default to allow re-clicking without distraction, or a very subtle one */

Â  Â  }

Â  Â  .choice-btn.marked-incorrect:hover,

Â  Â  .choice-btn.marked-incorrect:focus {

Â  Â  Â  color: var(--text-light-color);Â  /* ãƒ›ãƒãƒ¼æ™‚ã‚„ãƒ•ã‚©ãƒ¼ã‚«ã‚¹æ™‚ã‚‚æ–‡å­—è‰²ã‚’ç™½ã«ä¿ã¤ */

Â  Â  Â  border-color: var(--incorrect-color); /* æ ç·šã‚‚èµ¤è‰²ã‚’ä¿ã¤ */

Â  Â  }

Â  Â  .choice-btn.wiggle { /* Apply this class dynamically on incorrect click if needed */

Â  Â  Â  Â  animation: shake 0.4s;

Â  Â  }



Â  Â  .choice-btn:disabled:not(.correct):not(.marked-incorrect) {Â 

Â  Â  Â  background-color: #f5f5f5;

Â  Â  Â  color: var(--disabled-color);

Â  Â  Â  cursor: not-allowed;

Â  Â  }

Â  Â  .choice-btn:focus { /* ãƒ•ã‚©ãƒ¼ã‚«ã‚¹æ™‚ã®é’ã„æ ç·šï¼ˆã‚¢ã‚¦ãƒˆãƒ©ã‚¤ãƒ³ï¼‰ã‚’éè¡¨ç¤ºã«ã™ã‚‹ */

Â  Â  Â  outline: none;Â 

Â  Â  }





Â  Â  @keyframes pulse {

Â  Â  Â  0% { transform: scale(1); }

Â  Â  Â  50% { transform: scale(1.05); }

Â  Â  Â  100% { transform: scale(1); }

Â  Â  }

Â  Â  @keyframes shake { /* Subtle shake */

Â  Â  Â  0%, 100% { transform: translateX(0); }

Â  Â  Â  25% { transform: translateX(-3px); }

Â  Â  Â  75% { transform: translateX(3px); }

Â  Â  }



Â  Â  .answer-display {

Â  Â  Â  margin-top: 10px; /* Reduced margin */

Â  Â  Â  padding: 10px; /* Adjusted padding */

Â  Â  Â  background-color: rgba(0,0,0,0.03);

Â  Â  Â  border-radius: 8px;

Â  Â  Â  font-size: 0.95em; /* Adjusted font size */

Â  Â  Â  font-weight: 600;

Â  Â  Â  color: var(--text-color);

Â  Â  Â  min-height: 4em; /* MODIFIED for PC: Ensures space for 2 lines + padding */

Â  Â  Â  line-height: 1.4;

Â  Â  Â  visibility: hidden; /* Initially hidden but occupies space */

Â  Â  Â  opacity: 0;

Â  Â  Â  transition: opacity 0.3s ease, visibility 0s linear 0.3s; /* Delay visibility change */

Â  Â  Â  width: 100%; /* Take full width of its container */

Â  Â  }

Â  Â  .answer-display.visible {

Â  Â  Â  visibility: visible;

Â  Â  Â  opacity: 1;

Â  Â  Â  transition: opacity 0.3s ease, visibility 0s linear 0s;

Â  Â  }

Â  Â  .answer-display.correct-text { color: var(--correct-color); }

Â  Â  .answer-display.incorrect-text { color: var(--incorrect-color); }





Â  Â  .result-screen h2 {

Â  Â  Â  font-size: 1.8em; /* Adjusted font size */

Â  Â  Â  color: var(--primary-color);

Â  Â  Â  margin-bottom: 10px;

Â  Â  }

Â  Â  .final-score {

Â  Â  Â  font-size: 2.5em; /* Adjusted font size */

Â  Â  Â  color: var(--secondary-color);

Â  Â  Â  margin-bottom: 10px;

Â  Â  Â  font-weight: 800;

Â  Â  }

Â  Â  #finalMessage {

Â  Â  Â  font-size: 1.1em; /* Adjusted font size */

Â  Â  Â  margin-bottom: 25px;

Â  Â  Â  line-height: 1.5;

Â  Â  }



Â  Â  @media (max-width: 480px) { /* More specific mobile adjustments */

Â  Â  Â  body { padding: 10px 0px; } /* Remove side padding on body for smallest screens */

Â  Â  Â  .container { padding: 5px; }

Â  Â  Â  h1 { font-size: 2em; margin-bottom:20px; }

Â  Â  Â  .word { font-size: 1.8em; }

Â  Â  Â  .choices { grid-template-columns: 1fr; gap: 8px;}

Â  Â  Â 

Â  Â  Â  .setup-screen, .game-screen, .result-screen { padding: 15px; }



Â  Â  Â  .selection:nth-child(1) .buttons, /* Level buttons */

Â  Â  Â  .selection:nth-child(2) .buttons { /* Timer buttons */

Â  Â  Â  Â  display: grid;

Â  Â  Â  Â  grid-template-columns: repeat(auto-fit, minmax(80px, 1fr)); /* Ensure buttons fit */

Â  Â  Â  Â  gap: 8px;

Â  Â  Â  }

Â  Â  Â  Â  .selection:nth-child(3) .buttons { /* Dir buttons */

Â  Â  Â  Â  display: grid;

Â  Â  Â  Â  grid-template-columns: 1fr;

Â  Â  Â  Â  gap: 8px;

Â  Â  Â  }

Â  Â  Â  .btn { padding: 10px 12px; font-size: 0.9em; }

Â  Â  Â  .start-btn, .restart-btn { padding: 12px 25px; font-size: 1em; }

Â  Â  Â  .choice-btn { padding: 12px; font-size: 0.95em;}



Â  Â  Â  .answer-display {Â 

Â  Â  Â  Â  font-size: 0.9em;Â 

Â  Â  Â  Â  min-height: 4.2em; /* MODIFIED for Mobile: Ensures space for 2 lines + padding */

Â  Â  Â  }

Â  Â  }

Â  </style>

</head>



<body>

<div class="container">

Â  <h1 id="title">BLAST TRAINER</h1>



Â  <div class="setup-screen" id="setupScreen">

Â  Â  <div class="selection">

Â  Â  Â  <div class="buttons">

Â  Â  Â  Â  <button class="btn level-btn" data-level="5">è‹±æ¤œ5ç´š</button>

Â  Â  Â  Â  <button class="btn level-btn" data-level="4">4ç´š</button>

Â  Â  Â  Â  <button class="btn level-btn" data-level="3">3ç´š</button>

Â  Â  Â  Â  <button class="btn level-btn" data-level="p2">æº–2ç´š</button>

Â  Â  Â  Â  <button class="btn level-btn" data-level="2">2ç´š</button>

Â  Â  Â  Â  <button class="btn level-btn" data-level="p1">æº–1ç´š</button>

Â  Â  Â  Â  <button class="btn level-btn" data-level="1">1ç´š</button>

Â  Â  Â  </div>

Â  Â  </div>



Â  Â  <div class="selection">

Â  Â  Â  <div class="buttons">

Â  Â  Â  Â  <button class="btn timer-btn" data-time="60">1åˆ†</button>

Â  Â  Â  Â  <button class="btn timer-btn" data-time="180">3åˆ†</button>

Â  Â  Â  Â  <button class="btn timer-btn" data-time="300">5åˆ†</button>

Â  Â  Â  Â  <button class="btn timer-btn" data-time="600">10åˆ†</button>

Â  Â  Â  Â  <button class="btn timer-btn" data-time="0">ç„¡åˆ¶é™</button>

Â  Â  Â  </div>

Â  Â  </div>



Â  Â  <div class="selection">

Â  Â  Â  <div class="buttons">

Â  Â  Â  Â  <button class="btn dir-btn selected" data-mode="en-ja">è‹±èª â–¶ æ—¥æœ¬èª</button>

Â  Â  Â  Â  <button class="btn dir-btn" data-mode="ja-en">æ—¥æœ¬èª â–¶ è‹±èª</button>

Â  Â  Â  </div>

Â  Â  </div>



Â  Â  <button class="start-btn" id="startBtn" disabled>ã‚¹ã‚¿ãƒ¼ãƒˆï¼</button>

Â  </div>



Â  <div class="game-screen" id="gameScreen">

Â  Â  <div class="progress-bar"><div class="progress-fill" id="progressFill"></div></div>



Â  Â  <div class="game-info">

Â  Â  Â  <div class="timer" id="timerDisplay">æ™‚é–“: --</div>

Â  Â  Â  <div class="score" id="scoreDisplay">ã‚¹ã‚³ã‚¢: 0/0</div>

Â  Â  </div>



Â  Â  <div class="word-display">

Â  Â  Â  <div class="word" id="currentWord">Loading...</div>

Â  Â  Â  <div class="answer-display" id="answerDisplay"></div> </div>



Â  Â  <div class="choices" id="choices">

Â  Â  Â  </div>

Â  </div>



Â  <div class="result-screen" id="resultScreen">

Â  Â  <h2>ã‚²ãƒ¼ãƒ çµ‚äº†ï¼</h2>

Â  Â  <div class="final-score" id="finalScore">0/0</div>

Â  Â  <div id="finalMessage">ãŠç–²ã‚Œæ§˜ã§ã—ãŸï¼</div>

Â  Â  <button class="restart-btn" id="restartBtn">ã‚‚ã†ä¸€åº¦æŒ‘æˆ¦ï¼</button>

Â  </div>

</div>



<script>

/* ---------- Audio Context & Sound Effects ---------- */

let audioCtx;

const sounds = {

Â  click: null, correct: null, incorrect: null, start: null

};



// â˜… MODIFIED: initAudio é–¢æ•°ã‚’å¤‰æ›´

function initAudio() {

Â  if (audioCtx) return; // æ—¢ã«åˆæœŸåŒ–æ¸ˆã¿ãªã‚‰ä½•ã‚‚ã—ãªã„

Â  try {

Â  Â  audioCtx = new (window.AudioContext || window.webkitAudioContext)();

Â  Â  if (audioCtx) {

Â  Â  Â  // AudioContextã®ä½œæˆã«æˆåŠŸã—ãŸã‚‰ã€ã™ãã«ã‚µã‚¦ãƒ³ãƒ‰ã‚’ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—

Â  Â  Â  setupSounds();

Â  Â  Â  // console.log("AudioContext initialized and sounds setup attempted."); // ç¢ºèªç”¨ãƒ­ã‚°

Â  Â  } else {

Â  Â  Â  // console.warn("Failed to create AudioContext.");

Â  Â  }

Â  } catch (e) {

Â  Â  // console.warn("Web Audio API is not supported in this browser.", e);

Â  }

}



// setupSounds é–¢æ•°ã¯å¤‰æ›´ãªã— (ãŸã ã—ã€å‘¼ã³å‡ºã—å…ƒãŒå¤‰ã‚ã‚‹)

function createSound(type, freq1, freq2, duration, vol, attack = 0.01, decay = 0.1) {

Â  // ã“ã®é–¢æ•°ãŒå‘¼ã°ã‚Œã‚‹æ™‚ç‚¹ã§ audioCtx ãŒå­˜åœ¨ã™ã‚‹ã“ã¨ã‚’æœŸå¾…ã™ã‚‹

Â  if (!audioCtx) {

Â  Â  // é€šå¸¸ã€initAudioå†…ã§setupSoundsãŒå‘¼ã°ã‚Œã‚‹ãŸã‚ã€ã“ã“ã¯å®Ÿè¡Œã•ã‚Œãªã„ã¯ãš

Â  Â  // console.warn("createSound called when audioCtx is null.");

Â  Â  return () => {};

Â  }



Â  return () => {

Â  Â  if(!audioCtx) return;

Â  Â  // playSoundå†…ã§resumeã•ã‚Œã‚‹ã®ã§ã€ã“ã“ã§ã¯å¿…é ˆã§ã¯ãªã„ãŒã€å¿µã®ãŸã‚çŠ¶æ…‹ç¢ºèª

Â  Â  if (audioCtx.state === 'suspended') {

Â  Â  Â  Â  audioCtx.resume().then(() => {

Â  Â  Â  Â  Â  Â  // console.log("AudioContext resumed in createSound's playback thunk");

Â  Â  Â  Â  });

Â  Â  }

Â  Â  const oscillator = audioCtx.createOscillator();

Â  Â  const gainNode = audioCtx.createGain();



Â  Â  oscillator.connect(gainNode);

Â  Â  gainNode.connect(audioCtx.destination);



Â  Â  oscillator.type = type;

Â  Â  oscillator.frequency.setValueAtTime(freq1, audioCtx.currentTime);

Â  Â  if (freq2) {

Â  Â  Â  oscillator.frequency.exponentialRampToValueAtTime(freq2, audioCtx.currentTime + duration * 0.8);

Â  Â  }



Â  Â  gainNode.gain.setValueAtTime(0, audioCtx.currentTime);

Â  Â  gainNode.gain.linearRampToValueAtTime(vol, audioCtx.currentTime + attack);

Â  Â  gainNode.gain.linearRampToValueAtTime(0, audioCtx.currentTime + duration + decay);



Â  Â  oscillator.start(audioCtx.currentTime);

Â  Â  oscillator.stop(audioCtx.currentTime + duration + decay + 0.1);

Â  };

}



function setupSounds() {

Â  if (!audioCtx) { // audioCtxãŒãªã„å ´åˆã¯ã‚µã‚¦ãƒ³ãƒ‰ã‚’ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—ã§ããªã„

Â  Â  // console.warn("setupSounds called but audioCtx is not available.");

Â  Â  return;

Â  }

Â  // createSoundå†…ã§audioCtxã®å­˜åœ¨ã‚’ãƒã‚§ãƒƒã‚¯ã—ã¦ã„ã‚‹ã®ã§ã€ã“ã“ã§ã¯çœç•¥ã—ã¦ã‚‚è‰¯ã„ãŒå¿µã®ãŸã‚

Â  sounds.click = createSound('triangle', 700, 500, 0.03, 0.15, 0.005, 0.03);

Â  sounds.correct = createSound('sine', 900, 1300, 0.08, 0.25, 0.01, 0.08);

Â  sounds.incorrect = createSound('square', 220, 180, 0.12, 0.20, 0.01, 0.12);

Â  sounds.start = createSound('sawtooth', 330, 660, 0.18, 0.28, 0.02, 0.18);

Â  // console.log("Sounds object populated:", sounds); // ç¢ºèªç”¨ãƒ­ã‚°

}





// playSound é–¢æ•°ã¯å¤‰æ›´ãªã— (å†…éƒ¨ã§ audioCtx ãŒãªã‘ã‚Œã° initAudio ã‚’å‘¼ã³ã€resume ã‚‚è©¦ã¿ã‚‹)

function playSound(soundName) {

Â  if (!audioCtx) {

Â  Â  // playSoundãŒæœ€åˆã®ã‚¤ãƒ³ã‚¿ãƒ©ã‚¯ã‚·ãƒ§ãƒ³ã‚ˆã‚Šå…ˆã«å‘¼ã°ã‚Œã‚‹ã“ã¨ã¯ç¨€ã ãŒã€å¿µã®ãŸã‚initAudioã‚’å‘¼ã¶

Â  Â  // ãŸã ã—ã€initAudioã¯ãƒ¦ãƒ¼ã‚¶ãƒ¼ã‚¤ãƒ³ã‚¿ãƒ©ã‚¯ã‚·ãƒ§ãƒ³å†…ã§ãªã„ã¨æˆåŠŸã—ãªã„ã“ã¨ãŒå¤šã„

Â  Â  // console.log("playSound: audioCtx is null, attempting initAudio. This might not work outside user interaction.");

Â  Â  initAudio(); // initAudioå†…ã§setupSoundsã‚‚å‘¼ã°ã‚Œã‚‹

Â  }



Â  // audioCtx ãŒåˆæœŸåŒ–è©¦è¡Œå¾Œã‚‚å­˜åœ¨ã—ãªã„å ´åˆã€ã¾ãŸã¯ã‚µã‚¦ãƒ³ãƒ‰å®šç¾©ãŒãªã„å ´åˆã¯å†ç”Ÿä¸å¯

Â  if (!audioCtx || !sounds[soundName]) {

Â  Â  // console.warn(`playSound: Cannot play "${soundName}". audioCtx: ${!!audioCtx}, sound defined: ${!!sounds[soundName]}`);

Â  Â  return;

Â  }



Â  if (audioCtx.state === 'suspended') {

Â  Â  // console.log(`playSound: audioCtx is suspended. Attempting to resume for "${soundName}".`);

Â  Â  audioCtx.resume().then(() => {

Â  Â  Â  // console.log(`playSound: audioCtx resumed. Playing "${soundName}".`);

Â  Â  Â  if (sounds[soundName]) { // resumeå¾Œã«å†åº¦ãƒã‚§ãƒƒã‚¯

Â  Â  Â  Â  sounds[soundName]();

Â  Â  Â  }

Â  Â  }).catch(err => {

Â  Â  Â  // console.error("Error resuming AudioContext:", err);

Â  Â  });

Â  } else if (audioCtx.state === 'running') {

Â  Â  // console.log(`playSound: audioCtx is running. Playing "${soundName}".`);

Â  Â  sounds[soundName]();

Â  } else {

Â  Â  // console.warn(`playSound: audioCtx state is "${audioCtx.state}". Cannot play "${soundName}".`);

Â  }

}



// â˜… MODIFIED: firstInteractionListener é–¢æ•°ã‚’å¤‰æ›´

function firstInteractionListener() {

Â  // console.log("First user interaction detected."); // ç¢ºèªç”¨ãƒ­ã‚°

Â  initAudio(); // initAudio ã®ä¸­ã§ setupSounds ã‚‚å‘¼ã°ã‚Œã‚‹ã‚ˆã†ã«ãªã£ãŸ

Â  // ä»¥ä¸‹ã®ãƒªã‚¹ãƒŠãƒ¼å‰Šé™¤ã¯é‡è¦ãªã®ã§æ®‹ã™

Â  window.removeEventListener('click', firstInteractionListener, {capture: true});

Â  window.removeEventListener('touchstart', firstInteractionListener, {capture: true});

}

// ä»¥ä¸‹ã®ãƒªã‚¹ãƒŠãƒ¼ç™»éŒ²ã¯å¤‰æ›´ãªã—

window.addEventListener('click', firstInteractionListener, {capture: true, once: true});

window.addEventListener('touchstart', firstInteractionListener, {capture: true, once: true});





/* ---------- ãƒ¦ãƒ¼ãƒ†ã‚£ãƒªãƒ†ã‚£ ---------- */

const shuffle = a => {

Â  for (let i = a.length - 1; i > 0; i--) {

Â  Â  const j = Math.floor(Math.random() * (i + 1));

Â  Â  [a[i], a[j]] = [a[j], a[i]];

Â  }

Â  return a;

};



/* ---------- ãƒ¡ã‚¤ãƒ³ã‚¯ãƒ©ã‚¹ ---------- */

class BlastTrainer {

Â  constructor() {

Â  Â  this.level = null;

Â  Â  this.timeLimit = null;

Â  Â  this.playMode = 'en-ja';Â 

Â  Â  this.words = [];

Â  Â  this.currentWordData = null;Â 

Â  Â  this.shuffledQueue = [];

Â  Â  this.currentQueueIndex = 0;

Â  Â  this.score = 0;

Â  Â  this.attempts = 0; // Total questions attempted (first try per question)

Â  Â  this.currentQuestionAnsweredCorrectlyOnFirstTry = false; // â˜…MODIFIED: Flag for new scoring rule

Â  Â  this.timeLeft = 0;

Â  Â  this.timerIntervalId = null;

Â  Â  this.isPlaying = false;



Â  Â  this.setupScreenEl = document.getElementById('setupScreen');

Â  Â  this.gameScreenEl = document.getElementById('gameScreen');

Â  Â  this.resultScreenEl = document.getElementById('resultScreen');

Â  Â  this.startBtnEl = document.getElementById('startBtn');

Â  Â  this.titleEl = document.getElementById('title');

Â  Â  this.timerDisplayEl = document.getElementById('timerDisplay');

Â  Â  this.scoreDisplayEl = document.getElementById('scoreDisplay');

Â  Â  this.progressFillEl = document.getElementById('progressFill');

Â  Â  this.currentWordEl = document.getElementById('currentWord');

Â  Â  this.answerDisplayEl = document.getElementById('answerDisplay');

Â  Â  this.choicesEl = document.getElementById('choices');

Â  Â  this.finalScoreEl = document.getElementById('finalScore');

Â  Â  this.finalMessageEl = document.getElementById('finalMessage');

Â  Â  this.restartBtnEl = document.getElementById('restartBtn');

Â  Â 

Â  Â  this.bindEvents();

Â  Â  this.updateStartButtonState();Â 

Â  }



Â  bindEvents() {

Â  Â  // â˜…MODIFIED: Title click now also plays generic 'click' sound

Â  Â  this.titleEl.addEventListener('click', () => { playSound('click'); location.reload(); });

Â  Â 

Â  Â  document.querySelectorAll('.level-btn').forEach(b => b.addEventListener('click', () => this.handleSelection(b, 'level')));

Â  Â  document.querySelectorAll('.timer-btn').forEach(b => b.addEventListener('click', () => this.handleSelection(b, 'time')));

Â  Â  document.querySelectorAll('.dir-btn').forEach(b => b.addEventListener('click', () => this.handleSelection(b, 'dir')));

Â  Â 

Â  Â  // â˜…MODIFIED: Start button click now also plays generic 'click' sound before starting game

Â  Â  this.startBtnEl.addEventListener('click', () => {

Â  Â  Â  if (!this.startBtnEl.disabled) {

Â  Â  Â  Â  playSound('click'); // Play click sound for setup screen button

Â  Â  Â  Â  this.startGame(); // startGame will play its own 'start' sound

Â  Â  Â  }

Â  Â  });

Â  Â  this.restartBtnEl.addEventListener('click', () => this.restartGame());

Â  }



Â  handleSelection(buttonEl, type) {

Â  Â  playSound('click'); // â˜…MODIFIED: Generic click sound for setup screen buttons

Â  Â  const buttonClass = type === 'level' ? 'level-btn' : type === 'time' ? 'timer-btn' : 'dir-btn';

Â  Â  document.querySelectorAll(`.${buttonClass}`).forEach(b => b.classList.remove('selected'));

Â  Â  buttonEl.classList.add('selected');



Â  Â  if (type === 'level') this.level = buttonEl.dataset.level;

Â  Â  if (type === 'time') this.timeLimit = parseInt(buttonEl.dataset.time, 10);

Â  Â  if (type === 'dir') this.playMode = buttonEl.dataset.mode;

Â  Â 

Â  Â  this.updateStartButtonState();

Â  }



Â  updateStartButtonState() {

Â  Â  this.startBtnEl.disabled = !(this.level && this.timeLimit !== null);

Â  }



Â  async loadWordsFromFile() {

Â  Â  try {

Â  Â  Â  const response = await fetch(`./data/words-${this.level}.txt`);Â 

Â  Â  Â  if (!response.ok) throw new Error(`Failed to load words for level ${this.level}`);

Â  Â  Â  const textData = await response.text();

Â  Â  Â  this.words = textData.trim().split('\n').map(line => {

Â  Â  Â  Â  const [englishWord, japaneseWord] = line.split('\t');

Â  Â  Â  Â  return { english: englishWord?.trim(), japanese: japaneseWord?.trim() };

Â  Â  Â  }).filter(word => word.english && word.japanese);



Â  Â  Â  if (this.words.length === 0) throw new Error('No words loaded or file is empty.');

Â  Â  } catch (error) {

Â  Â  Â  // console.warn(`Error loading words: ${error.message}. Using fallback data.`);

Â  Â  Â  this.words = Array.from({ length: 20 }, (_, i) => ({

Â  Â  Â  Â  english: `Sample Word ${i + 1}`,

Â  Â  Â  Â  japanese: `ã‚µãƒ³ãƒ—ãƒ«å˜èª ${i + 1}`

Â  Â  Â  }));

Â  Â  }

Â  }



Â  async startGame() {

Â  Â  // playSound('start') is played here, which is fine for game initiation.

Â  Â  // The generic 'click' for the button press itself is now in bindEvents.

Â  Â  playSound('start');Â 

Â  Â  this.setupScreenEl.style.display = 'none';

Â  Â  this.gameScreenEl.style.display = 'block';

Â  Â  this.resultScreenEl.style.display = 'none';

Â  Â 

Â  Â  await this.loadWordsFromFile();

Â  Â 

Â  Â  this.shuffledQueue = shuffle(this.words.slice());

Â  Â  this.currentQueueIndex = 0;

Â  Â  this.score = 0;

Â  Â  this.attempts = 0;Â 

Â  Â  this.isPlaying = true;

Â  Â  this.timeLeft = this.timeLimit;



Â  Â  if (this.timeLimit > 0) {

Â  Â  Â  this.startTimer();

Â  Â  } else {

Â  Â  Â  this.updateTimerDisplay();Â 

Â  Â  }

Â  Â  this.displayNextQuestion();

Â  Â  this.updateScoreDisplay();Â 

Â  }



Â  startTimer() {

Â  Â  this.updateTimerDisplay();

Â  Â  this.timerIntervalId = setInterval(() => {

Â  Â  Â  this.timeLeft--;

Â  Â  Â  this.updateTimerDisplay();

Â  Â  Â  if (this.timeLeft <= 0) {

Â  Â  Â  Â  this.endGame();

Â  Â  Â  }

Â  Â  }, 1000);

Â  }



Â  updateTimerDisplay() {

Â  Â  if (this.timeLimit === 0) {

Â  Â  Â  this.timerDisplayEl.textContent = 'æ™‚é–“: ç„¡åˆ¶é™ âˆ';

Â  Â  Â  return;

Â  Â  }

Â  Â  const minutes = Math.floor(this.timeLeft / 60);

Â  Â  const seconds = String(this.timeLeft % 60).padStart(2, '0');

Â  Â  this.timerDisplayEl.textContent = `æ™‚é–“: ${minutes}:${seconds}`;

Â  }



Â  displayNextQuestion() {

Â  Â  if (!this.isPlaying) return;

Â  Â  this.currentQuestionAnsweredCorrectlyOnFirstTry = false; // â˜…MODIFIED: Reset flag for the new question



Â  Â  if (this.currentQueueIndex >= this.shuffledQueue.length) {

Â  Â  Â  this.shuffledQueue = shuffle(this.words.slice());Â 

Â  Â  Â  this.currentQueueIndex = 0;

Â  Â  }

Â  Â  this.currentWordData = this.shuffledQueue[this.currentQueueIndex++];

Â  Â 

Â  Â  const questionWord = this.playMode === 'en-ja' ? this.currentWordData.english : this.currentWordData.japanese;

Â  Â  const correctAnswer = this.playMode === 'en-ja' ? this.currentWordData.japanese : this.currentWordData.english;



Â  Â  this.currentWordEl.textContent = questionWord;

Â  Â 

Â  Â  this.answerDisplayEl.textContent = ''; // Clear previous answer text

Â  Â  this.answerDisplayEl.className = 'answer-display'; // Reset classes

Â  Â 

Â  Â  if (this.playMode === 'en-ja' && questionWord) {Â 

Â  Â  Â  this.speakWord(questionWord);

Â  Â  }



Â  Â  const otherWordsPool = this.words.filter(word =>Â 

Â  Â  Â  Â  (this.playMode === 'en-ja' ? word.japanese : word.english) !== correctAnswer &&Â 

Â  Â  Â  Â  (this.playMode === 'en-ja' ? word.english : word.japanese) !== questionWord

Â  Â  );

Â  Â  const wrongAnswers = shuffle(otherWordsPool)

Â  Â  Â  .slice(0, 3)

Â  Â  Â  .map(word => this.playMode === 'en-ja' ? word.japanese : word.english);

Â  Â  Â 

Â  Â  const choicesArray = shuffle([correctAnswer, ...wrongAnswers]);

Â  Â 

Â  Â  this.choicesEl.innerHTML = '';Â 

Â  Â  choicesArray.forEach(choiceText => {

Â  Â  Â  const buttonEl = document.createElement('button');

Â  Â  Â  buttonEl.className = 'btn choice-btn';

Â  Â  Â  buttonEl.textContent = choiceText;

Â  Â  Â  buttonEl.addEventListener('click', () => this.handleAnswerSelection(

Â  Â  Â  Â  Â  buttonEl,Â 

Â  Â  Â  Â  Â  choiceText,Â 

Â  Â  Â  Â  Â  correctAnswer,Â 

Â  Â  Â  Â  Â  this.currentWordData.english,Â 

Â  Â  Â  Â  Â  this.currentWordData.japanese

Â  Â  Â  ));

Â  Â  Â  this.choicesEl.appendChild(buttonEl);

Â  Â  });

Â  Â  this.updateScoreDisplay();Â 



Â  Â  // â˜…â˜…â˜… ã“ã“ã«ãƒ•ã‚©ãƒ¼ã‚«ã‚¹ã‚’å¤–ã™ã‚³ãƒ¼ãƒ‰ã‚’æŒ¿å…¥ã—ã¾ã—ãŸ â˜…â˜…â˜…

Â  Â  if (document.activeElement && typeof document.activeElement.blur === 'function') {

Â  Â  Â  document.activeElement.blur();

Â  Â  }

Â  Â  // â˜…â˜…â˜… æŒ¿å…¥ã“ã“ã¾ã§ â˜…â˜…â˜…

Â  }



Â  handleAnswerSelection(buttonEl, selectedAnswer, correctAnswer, currentQuestionEnglish, currentQuestionJapanese) {

Â  Â  if (!this.isPlaying) return;

Â  Â 

Â  Â  let isFirstClickForThisQuestion = true;

Â  Â  const choiceButtons = this.choicesEl.querySelectorAll('.choice-btn');

Â  Â  for(const btn of choiceButtons) {

Â  Â  Â  Â  if(btn.classList.contains('marked-incorrect') || btn.classList.contains('correct')){

Â  Â  Â  Â  Â  Â  isFirstClickForThisQuestion = false;

Â  Â  Â  Â  Â  Â  break;

Â  Â  Â  Â  }

Â  Â  }



Â  Â  let selectedWordObject;

Â  Â  if (this.playMode === 'en-ja') {Â 

Â  Â  Â  Â  selectedWordObject = this.words.find(w => w.japanese === selectedAnswer);

Â  Â  } else {Â 

Â  Â  Â  Â  selectedWordObject = this.words.find(w => w.english === selectedAnswer);

Â  Â  }

Â  Â  const selectedDisplayEnglish = selectedWordObject?.english || (this.playMode === 'ja-en' ? selectedAnswer : "???");

Â  Â  const selectedDisplayJapanese = selectedWordObject?.japanese || (this.playMode === 'en-ja' ? selectedAnswer : "???");



Â  Â  if (selectedDisplayEnglish && selectedDisplayEnglish !== "???") {Â 

Â  Â  Â  Â  this.speakWord(selectedDisplayEnglish);

Â  Â  }



Â  Â  const isCorrect = selectedAnswer === correctAnswer;



Â  Â  this.answerDisplayEl.classList.remove('correct-text', 'incorrect-text', 'visible');

Â  Â  void this.answerDisplayEl.offsetWidth;Â 



Â  Â  if (isCorrect) {

Â  Â  Â  playSound('correct');

Â  Â  Â  if (isFirstClickForThisQuestion && !this.currentQuestionAnsweredCorrectlyOnFirstTry) {

Â  Â  Â  Â  this.score++;

Â  Â  Â  Â  this.currentQuestionAnsweredCorrectlyOnFirstTry = true;

Â  Â  Â  }

Â  Â  Â 

Â  Â  Â  buttonEl.classList.remove('marked-incorrect', 'wiggle');Â 

Â  Â  Â  buttonEl.classList.add('correct');

Â  Â  Â 

Â  Â  Â  this.answerDisplayEl.textContent = `æ­£è§£ï¼ ã€Œ${currentQuestionEnglish}ã€ã¯ã€Œ${currentQuestionJapanese}ã€ã ã­ï¼`;

Â  Â  Â  this.answerDisplayEl.classList.add('correct-text');

Â  Â  Â 

Â  Â  Â  document.querySelectorAll('.choice-btn').forEach(b => {

Â  Â  Â  Â  Â  b.disabled = true;Â 

Â  Â  Â  Â  Â  if (b !== buttonEl && b.textContent !== correctAnswer) {Â 

Â  Â  Â  Â  Â  Â  Â  b.style.opacity = "0.5";Â 

Â  Â  Â  Â  Â  }

Â  Â  Â  });

Â  Â  Â  setTimeout(() => this.displayNextQuestion(), 1200);Â 

Â  Â  } else { // Incorrect answer

Â  Â  Â  playSound('incorrect');

Â  Â  Â  buttonEl.classList.add('marked-incorrect');Â 

Â  Â  Â  buttonEl.classList.add('wiggle');

Â  Â  Â  setTimeout(()=> buttonEl.classList.remove('wiggle'), 400);



Â  Â  Â  this.answerDisplayEl.textContent = `ã€Œ${selectedDisplayEnglish}ã€ã¯ã€Œ${selectedDisplayJapanese}ã€ã ã‚ˆã€‚`;

Â  Â  Â  this.answerDisplayEl.classList.add('incorrect-text');

Â  Â  }

Â  Â 

Â  Â  if (isFirstClickForThisQuestion) {

Â  Â  Â  Â  this.attempts++;

Â  Â  }



Â  Â  this.answerDisplayEl.classList.add('visible');

Â  Â  this.updateScoreDisplay();

Â  }

Â 

Â  speakWord(wordToSpeak) {

Â  Â  if (!('speechSynthesis' in window) || !wordToSpeak) return;

Â  Â  const utterance = new SpeechSynthesisUtterance(wordToSpeak);

Â  Â  const voices = speechSynthesis.getVoices();

Â  Â  let preferredVoice = voices.find(v => /en-(US|GB)/.test(v.lang) && (v.name.includes('Google') || v.localService || v.default));

Â  Â  if (!preferredVoice) preferredVoice = voices.find(v => /en-(US|GB)/.test(v.lang));

Â  Â 

Â  Â  utterance.voice = preferredVoice || voices.find(v => v.lang && v.lang.startsWith('en-'));Â 

Â  Â  utterance.lang = utterance.voice ? utterance.voice.lang : 'en-US';

Â  Â  utterance.rate = 0.9;Â 

Â  Â  utterance.pitch = 1;

Â  Â  speechSynthesis.cancel();Â 

Â  Â  speechSynthesis.speak(utterance);

Â  }



Â  updateScoreDisplay() {

Â  Â  this.scoreDisplayEl.textContent = `ã‚¹ã‚³ã‚¢: ${this.score}/${this.attempts}`;

Â  Â  const progressPercentage = this.attempts > 0 ? (this.score / this.attempts) * 100 : 0;

Â  Â  this.progressFillEl.style.width = `${progressPercentage}%`;

Â  }



Â  endGame() {

Â  Â  this.isPlaying = false;

Â  Â  if (this.timerIntervalId) clearInterval(this.timerIntervalId);

Â  Â 

Â  Â  this.gameScreenEl.style.display = 'none';

Â  Â  this.resultScreenEl.style.display = 'block';

Â  Â 

Â  Â  const percentage = this.attempts > 0 ? Math.round((this.score / this.attempts) * 100) : 0;

Â  Â  this.finalScoreEl.textContent = `${this.score} / ${this.attempts} (${percentage}%)`;

Â  Â 

Â  Â  let message = "ãŠç–²ã‚Œæ§˜ï¼";

Â  Â  if (percentage >= 95) message = "ç´ æ™´ã‚‰ã—ã„ï¼ã»ã¼ãƒ‘ãƒ¼ãƒ•ã‚§ã‚¯ãƒˆï¼ğŸ‰ ã•ã‚‰ãªã‚‹é«˜ã¿ã‚’ç›®æŒ‡ãã†ï¼";

Â  Â  else if (percentage >= 80) message = "ã™ã”ã„ï¼é«˜å¾—ç‚¹ã ã­ï¼âœ¨ æ¬¡ã¯90%è¶Šãˆã«æŒ‘æˆ¦ï¼";

Â  Â  else if (percentage >= 60) message = "è‰¯ã„èª¿å­ï¼ãã®èª¿å­ã§èªå½™åŠ›ã‚’ã‚¢ãƒƒãƒ—ï¼ğŸ‘";

Â  Â  else if (percentage >= 40) message = "ãƒŠã‚¤ã‚¹ãƒãƒ£ãƒ¬ãƒ³ã‚¸ï¼ç¶šã‘ã‚‹ã“ã¨ãŒä¸€ç•ªã®åŠ›ã ã‚ˆï¼ğŸ’ª";

Â  Â  else message = "ãŸãã•ã‚“ç·´ç¿’ã—ã¦ã€å¾—æ„ãªå˜èªã‚’å¢—ã‚„ã—ã¦ã„ã“ã†ï¼ğŸ˜Š ãƒ•ã‚¡ã‚¤ãƒˆï¼";

Â  Â  this.finalMessageEl.textContent = message;

Â  Â  if(audioCtx && sounds.start) playSound('start');Â 

Â  }



Â  restartGame() {

Â  Â  if(audioCtx && sounds.click) playSound('click');



Â  Â  if (this.timerIntervalId) clearInterval(this.timerIntervalId);

Â  Â 

Â  Â  this.resultScreenEl.style.display = 'none';

Â  Â  this.setupScreenEl.style.display = 'block';

Â  Â  this.gameScreenEl.style.display = 'none';Â 



Â  Â  document.querySelectorAll('.btn.selected').forEach(b => b.classList.remove('selected'));

Â  Â  const defaultDirBtn = document.querySelector('.dir-btn[data-mode="en-ja"]');

Â  Â  if (defaultDirBtn) defaultDirBtn.classList.add('selected');

Â  Â  this.playMode = 'en-ja';





Â  Â  this.progressFillEl.style.width = '0%';

Â  Â  this.currentWordEl.textContent = 'Loading...';

Â  Â  this.choicesEl.innerHTML = '';

Â  Â  this.answerDisplayEl.className = 'answer-display'; // Reset and hide

Â  Â  this.timerDisplayEl.textContent = 'æ™‚é–“: --';

Â  Â  this.scoreDisplayEl.textContent = 'ã‚¹ã‚³ã‚¢: 0/0';



Â  Â  this.level = null;

Â  Â  this.timeLimit = null;

Â  Â  this.updateStartButtonState();

Â  }

}



window.addEventListener('DOMContentLoaded', () => {

Â  new BlastTrainer();

Â  if ('speechSynthesis' in window && typeof speechSynthesis.getVoices === 'function') {

Â  Â  const polly = setInterval(() => {

Â  Â  Â  Â  if (speechSynthesis.getVoices().length) {

Â  Â  Â  Â  Â  Â  clearInterval(polly);

Â  Â  Â  Â  } else {

Â  Â  Â  Â  Â  Â  speechSynthesis.getVoices();Â 

Â  Â  Â  Â  }

Â  Â  }, 200);

Â  }

});

</script>

</body>

</html>